!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/operators"),require("@angular/forms"),require("@angular/common"),require("@angular/common/http"),require("@angular/fire"),require("@angular/fire/database"),require("@angular/fire/auth"),require("angularfire2/storage"),require("@angular/core"),require("@angular/router"),require("@angular/fire/firestore"),require("firebase")):"function"==typeof define&&define.amd?define("vdoit",["exports","rxjs/operators","@angular/forms","@angular/common","@angular/common/http","@angular/fire","@angular/fire/database","@angular/fire/auth","angularfire2/storage","@angular/core","@angular/router","@angular/fire/firestore","firebase"],e):e(t.vdoit={},t.rxjs.operators,t.ng.forms,t.ng.common,t.ng.common.http,t.ng.fire,t.ng.fire.database,t.ng.fire.auth,t.storage,t.ng.core,t.ng.router,t.ng.fire.firestore,t.firebase)}(this,function(t,r,e,n,o,i,a,s,l,u,c,d,p){"use strict";function g(r,o){var i,a,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,a&&(s=2&t[0]?a["return"]:t[0]?a["throw"]||((s=a["return"])&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){l.label=t[1];break}if(6===t[0]&&l.label<s[1]){l.label=s[1],s=t;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(t);break}s[2]&&l.ops.pop(),l.trys.pop();continue}t=o.call(r,l)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var f=(m.prototype.signupUser=function(t,e){p.auth().createUserWithEmailAndPassword(t,e)["catch"](function(t){return console.log(t)}).then(function(t){console.log(t)})},m.prototype.signinUser=function(t,e){var n=this;p.auth().signInWithEmailAndPassword(t,e).then(function(t){n.router.navigate(["user/home/:"+t.user.email]),p.auth().currentUser.getIdToken().then(function(t){return n.token=t})})["catch"](function(t){return console.log(t)})},m.prototype.logout=function(){p.auth().signOut(),this.token=null},m.prototype.getToken=function(){var e=this;return p.auth().currentUser.getIdToken().then(function(t){return e.token=t}),this.token},m.prototype.isAuthenticated=function(){return null!=this.token},m.decorators=[{type:u.Injectable}],m.ctorParameters=function(){return[{type:c.Router}]},m);function m(t){this.router=t}var h=(b.prototype.allCountries=function(){return this.http.get(this.url)},b.decorators=[{type:u.Injectable,args:[{providedIn:"root"}]}],b.ctorParameters=function(){return[{type:o.HttpClient}]},b.ngInjectableDef=u.defineInjectable({factory:function(){return new b(u.inject(o.HttpClient))},token:b,providedIn:"root"}),b);function b(t){this.http=t,this.url="https://raw.githubusercontent.com/sagarshirbhate/Country-State-City-Database/master/Contries.json"}var v=(y.prototype.ngOnInit=function(){this.userForm=this.form.group({name:["",[e.Validators.required]],email:["",[e.Validators.required,e.Validators.email]],password:["",[e.Validators.required,e.Validators.minLength(5)]],organization:["",[e.Validators.required]],uploadImage:["",[e.Validators.required]],selectCountry:["",[e.Validators.required]],selectState:["",[e.Validators.required]],selectCity:["",[e.Validators.required]]}),this.getCountries()},Object.defineProperty(y.prototype,"f",{get:function(){return this.userForm.controls},enumerable:!0,configurable:!0}),y.prototype.upload=function(t){var e=this,n=Math.random().toString(36).substring(2);this.ref=this.afStorage.ref(n),this.task=this.ref.put(t.target.files[0]),this.uploadProgress=this.task.percentageChanges(),this.task.snapshotChanges().pipe(r.finalize(function(){e.downloadURL=e.ref.getDownloadURL(),e.downloadURL.subscribe(function(t){return e.image=t})})).subscribe()},y.prototype.getCountries=function(){var e=this;this.country.allCountries().subscribe(function(t){return e.countryInfo=t.Countries,e.countryInfo},function(t){return console.log(t)},function(){return console.log("complete")})},y.prototype.onChangeCountry=function(t){return this.stateInfo=this.countryInfo[t].States,this.cityInfo=this.stateInfo[0].Cities,this.stateInfo},y.prototype.onChangeState=function(t){return this.cityInfo=this.stateInfo[t].Cities,this.cityInfo},y.prototype.login=function(){this.router.navigate(["/login"])},y.prototype.onSubmit=function(){var o=this;if(this.submitted=!0,!this.userForm.invalid){var i=this.userForm.value.email,a=this.userForm.value.password;this.selectCountry=parseInt(this.userForm.value.selectCountry),this.selectState=parseInt(this.userForm.value.selectState),this.selectCity=parseInt(this.userForm.value.selectCity),console.log(typeof this.selectCountry),console.log(this.country.allCountries()),this.country.allCountries().subscribe(function(t){var e=t.Countries[o.selectCountry],n=e.States[o.selectState];o.selectedCountry=e.CountryName,o.selectedState=n.StateName,o.SelectedCity=n.Cities[o.selectCity],console.log(o.selectedCountry),console.log(o.selectedState),console.log(o.SelectedCity),function r(e,a,s,l){return new(s||(s=Promise))(function(t,n){function r(t){try{i(l.next(t))}catch(e){n(e)}}function o(t){try{i(l["throw"](t))}catch(e){n(e)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(r,o)}i((l=l.apply(e,a||[])).next())})}(o,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return[4,this.db.collection("user").add({email:this.userForm.value.email,name:this.userForm.value.name,organization:this.userForm.value.organization,uploadImage:this.image,selectCountry:this.selectedCountry,selectState:this.selectedState,selectCity:this.SelectedCity})];case 1:return e=t.sent(),this.authService.signupUser(i,a),this.router.navigate(["/login"]),[2,e.id]}})}).then(function(t){console.log(t)})}),this.loading=!0}},y.decorators=[{type:u.Component,args:[{selector:"enl-registration",template:'<div>  \n  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">\n\n     <div class="form-group col-md-6">\n    <label>\n      <input type="text" class="input" formControlName="name" placeholder="Name"[ngClass]="{ \'is-invalid\': submitted && f.name.errors }" >\n      <div class="line-box">\n        <div class="line"></div>\n      </div>\n      <div *ngIf="submitted && f.name.errors" class="invalid-feedback">\n        <div *ngIf="f.name.errors.required">Name is required</div>\n        <div *ngIf = "f.name.errors.pattern">Name Should be in Alphabetical</div>\n    </div>\n    </label>\n    </div>\n    <label>\n        <div class="form-group col-md-6">\n            <input type="email" class="input" formControlName="email" placeholder="Email" [ngClass]="{ \'is-invalid\': submitted && f.email.errors }">\n      \n            <div class="line-box">\n              <div class="line"></div>\n            </div>\n            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">\n              <div *ngIf="f.email.errors.required">Name is required</div>\n              <div *ngIf = "f.email.errors.email">Enter Valid Email</div>\n          </div>\n          </div>\n         <div class="form-group col-md-6"> \n      <input type="password" class="input" formControlName="password" placeholder="password" [ngClass]="{ \'is-invalid\': submitted && f.password.errors }">\n      <div class="line-box">\n        <div class="line"></div>\n      </div>\n      <div *ngIf="submitted && f.password.errors" class="invalid-feedback">\n        <div *ngIf="f.password.errors.minlength">Password length should be minimum of 5</div>\n        \n    </div>\n  </div>\n    </label>\n  \n\n    <div class="form-group col-md-6">\n        <label for="inputEmail4">Organization Name</label>\n        <input type="text" class="form-control" formControlName="organization" id="inputEmail4" placeholder="Organization Name">\n      </div>\n      <div class="form-group col-md-6">\n        <label class="image-upload-container btn btn-bwm">\n          <span>Select Image</span>\n          <input formControlName = "uploadImage"\n                 type="file"\n                 accept="image/*"\n                 (change)="upload($event)">\n        </label>\n      </div>\n      <div class="progress">\n        <div class="progress-bar progress-bar-striped bg-success" role="progressbar" [style.width]="(uploadProgress | async) + \'%\'" [attr.aria-valuenow]="(uploadProgress | async)" aria-valuemin="0" aria-valuemax="100"></div>\n    </div>\n    \n    <div class="form-group">\n      <label>Select Country</label>\n      <select class="form-control"formControlName="selectCountry"  (change)="onChangeCountry($event.target.value)">\n        <option *ngFor="let country of countryInfo; let i = index" value="{{i}}">{{country?.CountryName}}</option>\n      </select>  \n    </div>\n\n    <div class="form-group">\n        <label>Select State</label>\n        <select class="form-control" formControlName = "selectState" (change)="onChangeState($event.target.value)">\n         \x3c!-- <option *ngIf="stateInfo == \'\'" value="-1">--Select State--</option> --\x3e\n          <option *ngFor="let state of stateInfo; let j = index" value="{{j}}">{{state?.StateName}}</option>\n        </select>  \n    </div>\n\n    <div class="form-group">\n        <label>Select City</label>\n        <select formControlName="selectCity" class="form-control">\n          \x3c!--  <option *ngIf="cityInfo == \'\'" value="-1">--Select CIty--</option> --\x3e\n          <option *ngFor="let city of cityInfo; let k = index" value="{{k}}">{{city}}</option>\n        </select>  \n    </div>\n    <div class="form-group">\n      <button [disabled]="loading" class="btn btn-primary"><a routerLink="/login"></a>Register</button>\n  </div>\n\n  </form>\n  <div class="form-group">\n     <button [disabled]="loading" (click)="login()"class="btn btn-primary">Login here</button>\n  </div>\n</div>',styles:["body{background:#c5e1a5}form{width:60%;margin:60px auto;background:#efefef;padding:60px 120px 80px;text-align:center;box-shadow:2px 2px 3px rgba(0,0,0,.1)}label{display:block;position:relative;margin:40px 0}.label-txt{position:absolute;top:-1.6em;padding:10px;font-family:sans-serif;font-size:.8em;letter-spacing:1px;color:#787878;transition:.3s}.input{width:100%;padding:10px;background:0 0;border:none;outline:0}.line-box{position:relative;width:100%;height:2px;background:#bcbcbc}.line{position:absolute;width:0%;height:2px;top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background:#8bc34a;transition:.6s}.input:focus+.line-box .line{width:100%}.label-active{top:-3em}button{display:inline-block;padding:12px 24px;background:#dcdcdc;font-weight:700;color:#787878;border:none;outline:0;border-radius:3px;cursor:pointer;transition:.3s}button:hover{background:#8bc34a;color:#fff}"]}]}],y.ctorParameters=function(){return[{type:l.AngularFireStorage},{type:e.FormBuilder},{type:h},{type:d.AngularFirestore},{type:c.Router},{type:f}]},y);function y(t,e,n,r,o,i){this.afStorage=t,this.form=e,this.country=n,this.db=r,this.router=o,this.authService=i,this.loading=!1,this.submitted=!1,this.stateInfo=[],this.countryInfo=[],this.cityInfo=[],this.url="https://raw.githubusercontent.com/sagarshirbhate/Country-State-City-Database/master/Contries.json"}var C=(w.prototype.ngOnInit=function(){this.signinForm=this.form.group({email:["",e.Validators.required],password:["",e.Validators.required]})},w.prototype.onSubmit=function(){var t=this.signinForm.value.email,e=this.signinForm.value.password;this.auth.signinUser(t,e),console.log(p.auth().currentUser.email)},w.decorators=[{type:u.Component,args:[{selector:"enl-login",template:'\n<div class="container">\n  <div class="row">\n    <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">\n      <div class="card card-signin my-5">\n        <div class="card-body">\n          <h5 class="card-title text-center">Sign In</h5>\n          <form class="form-signin" [formGroup]="signinForm" (ngSubmit)="onSubmit()">\n            <div class="form-label-group"><span>Your Email</span>\n              <input type="email" id="inputEmail" class="form-control"  formControlName="email" required autofocus>\n              \n            </div>\n\n            <div class="form-label-group">\n              <span>Passwords</span>\n              <input type="password" id="inputPassword" class="form-control" formControlName="password" required>\n              \n            </div>\n\n        \n            <button class="btn btn-lg btn-primary btn-block text-uppercase" type="submit">Sign in</button>\n            <hr class="my-4">\n            \n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[":root{--input-padding-x:1.5rem;--input-padding-y:.75rem}body{background:#007bff;background:linear-gradient(to right,#0062e6,#33aeff)}.card-signin{border:0;border-radius:1rem;box-shadow:0 .5rem 1rem 0 rgba(0,0,0,.1)}.card-signin .card-title{margin-bottom:2rem;font-weight:300;font-size:1.5rem}.card-signin .card-body{padding:2rem}.form-signin{width:100%}.form-signin .btn{font-size:80%;border-radius:5rem;letter-spacing:.1rem;font-weight:700;padding:1rem;transition:.2s}.form-label-group{position:relative;margin-bottom:1rem}.form-label-group input{height:auto;border-radius:2rem}.form-label-group>input,.form-label-group>label{padding:var(--input-padding-y) var(--input-padding-x)}.form-label-group>label{position:absolute;top:0;left:0;display:block;width:100%;margin-bottom:0;line-height:1.5;color:#495057;border:1px solid transparent;border-radius:.25rem;transition:.1s ease-in-out}.form-label-group input::-webkit-input-placeholder{color:transparent}.form-label-group input:-ms-input-placeholder{color:transparent}.form-label-group input::-ms-input-placeholder{color:transparent}.form-label-group input::-moz-placeholder{color:transparent}.form-label-group input::placeholder{color:transparent}.form-label-group input:not(:placeholder-shown){padding-top:calc(var(--input-padding-y) + var(--input-padding-y) * (2 / 3));padding-bottom:calc(var(--input-padding-y)/ 3)}.form-label-group input:not(:placeholder-shown)~label{padding-top:calc(var(--input-padding-y)/ 3);padding-bottom:calc(var(--input-padding-y)/ 3);font-size:12px;color:#777}.btn-google{color:#fff;background-color:#ea4335}.btn-facebook{color:#fff;background-color:#3b5998}"]}]}],w.ctorParameters=function(){return[{type:e.FormBuilder},{type:f}]},w);function w(t,e){this.form=t,this.auth=e}var x=(I.prototype.canActivate=function(t,e){return this.authService.isAuthenticated()},I.decorators=[{type:u.Injectable}],I.ctorParameters=function(){return[{type:f}]},I);function I(t){this.authService=t}var S=(k.prototype.ngOnInit=function(){var e=this;this.url=this.router.url.slice(12),p.firestore().collection("user").onSnapshot(function(t){t.forEach(function(t){console.log(t),e.data=t.data(),console.log(e.data.uploadImage)})})},k.prototype.onLogOut=function(){this.auth.logout(),this.router.navigate["/"]},k.decorators=[{type:u.Component,args:[{selector:"enl-home",template:'\n<div class="container container-fluid">\n  <div class="col col-mg-6">\n    <p>Name : {{data?.name}}</p>\n    <p>email : {{data?.email}}</p>\n    <img [src] ="data?.uploadImage" height="100px" width="100px">\n    <p>organization : {{data?.organization}}</p>\n    <p>Country : {{data?.selectCountry}}</p>\n    <p>state : {{data?.selectState}}</p>\n    <p>city : {{data?.selectCity}}</p>\n    \n  </div>\n  <div class="btn btn-primary">\n  <button type="button" (click)="onLogOut()"><a href="/">Logout</a></button>\n  </div>\n</div>',styles:[""]}]}],k.ctorParameters=function(){return[{type:f},{type:c.Router},{type:d.AngularFirestore}]},k);function k(t,e,n){this.auth=t,this.router=e,this.db=n,this.user=p.auth().currentUser}var F={apiKey:"AIzaSyCGPXlnA1hFVa1CeTSlOCwKEYsMypTTOSw",authDomain:"vdoit-507fc.firebaseapp.com",databaseURL:"https://vdoit-507fc.firebaseio.com",projectId:"vdoit-507fc",storageBucket:"vdoit-507fc.appspot.com",messagingSenderId:"1049933201863",appId:"1:1049933201863:web:618fb38251a368cf"};p.initializeApp(F);var q=(N.decorators=[{type:u.NgModule,args:[{declarations:[v,C,S],imports:[e.ReactiveFormsModule,n.CommonModule,o.HttpClientModule,i.AngularFireModule.initializeApp(F),a.AngularFireDatabaseModule,l.AngularFireStorageModule,e.FormsModule],providers:[d.AngularFirestore,h,l.AngularFireStorageModule,f,x,s.AngularFireAuth],exports:[v,S]}]}],N);function N(){}t.firebaseConfig=F,t.RegistrationComponent=v,t.LoginComponent=C,t.AuthGuard=x,t.HomeComponent=S,t.VdoitModule=q,t.ɵb=f,t.ɵa=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vdoit.umd.min.js.map